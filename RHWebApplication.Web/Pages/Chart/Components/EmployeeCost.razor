@namespace RHWebApplication.Web.Pages.Charts
<MudCard Style="width: 65VW">
    <MudText Typo="Typo.h6">Employee Cost Dashboard</MudText>
    <MudChart ChartType="ChartType.Donut" Width="400px" Height="400px"  InputData="@_datas.ToArray()"            InputLabels="@_labels.ToArray()">
        <CustomGraphics>
            <text class="donut-inner-text" x="50%" y="35%" dominant-baseline="middle" text-anchor="middle" fill="black"      font-family="Helvetica" font-size="3">Total</text>
            <text class="donut-inner-text" x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="black"  font-family="Helvetica" font-size="4">@_datas.Sum().ToString("F2")</text>>
        </CustomGraphics>
    </MudChart>
</MudCard>

@code {
    [CascadingParameter]
    public List<PayrollResponse> _payrollsSelected { get; set; }

    private List<double> _datas = new List<double>();
    private List<string> _labels = new List<string>();

    protected override void OnParametersSet()
    {
        LoadChart();
    }

    private void LoadChart()
    {
        _datas = new();
        _labels = new();

        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.OverTimeAditionals).Sum()));
        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.PericulosityValue).Sum()));
        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.UnhealthyValue).Sum()));
        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.Commission).Sum()));
        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.INSSDeduction).Sum()));
        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.IRRFDeduction).Sum()));
        _datas.Add(Convert.ToDouble(_payrollsSelected.Select(p => p.BaseSalary).Sum()));

        _labels = ["OverTime Aditionals", "Periculosity Value", "Unhealthy Value", "Commission", "INSS Deduction", "IRRF Deduction", "BaseSalary"];
    }
}
